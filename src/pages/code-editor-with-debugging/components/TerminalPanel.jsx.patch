if (data === '\r') {  // Enter key
          if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {
            socketRef.current.send(commandBuffer + '\n');
          }
          xtermRef.current.write('\r\n');
          commandBuffer = '';  // Clear buffer
        } else if (data === '\u007f') {  // Backspace key
          if (commandBuffer.length > 0) {
            commandBuffer = commandBuffer.slice(0, -1);
            xtermRef.current.write('\b \b');  // Erase last character visually
          }
        } else {
          commandBuffer += data;  // Add to buffer
          xtermRef.current.write(data);  // Echo on terminal
        }
      });
=======
      xtermRef.current.onData((data) => {
        if (data === '\r') {  // Enter key
          if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {
            socketRef.current.send(commandBuffer + '\n');
          }
          xtermRef.current.write('\r\n');
          commandBuffer = '';  // Clear buffer
        } else if (data === '\u007f') {  // Backspace key
          if (commandBuffer.length > 0) {
            commandBuffer = commandBuffer.slice(0, -1);
            xtermRef.current.write('\b \b');  // Erase last character visually
          }
        } else {
          commandBuffer += data;  // Add to buffer
          // Removed local echo to prevent duplicate characters
          // xtermRef.current.write(data);  // Echo on terminal
        }
      });
